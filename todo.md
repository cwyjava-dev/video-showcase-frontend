# 视频展示平台项目任务清单

## 数据库设计
- [x] 创建视频表（videos）
- [x] 创建分类表（categories）
- [x] 创建标签表（tags）
- [x] 创建视频标签关联表（video_tags）
- [x] 推送数据库迁移

## 后端API开发
- [x] 实现视频查询函数（列表、详情、搜索）
- [x] 实现分类和标签查询函数
- [x] 实现管理员权限验证中间件
- [x] 实现视频上传API（管理员）
- [x] 实现视频编辑API（管理员）
- [x] 实现视频删除API（管理员）
- [x] 实现分类管理API（管理员）
- [x] 实现标签管理API（管理员）
- [x] 实现视频搜索API（公开）
- [x] 实现视频列表API（公开）
- [x] 实现视频详情API（公开）

## 前端用户界面开发
- [x] 设计优雅的全局主题样式
- [x] 创建首页视频列表展示
- [x] 创建视频详情页面和播放器
- [x] 创建分类筛选功能
- [x] 创建标签筛选功能
- [x] 创建搜索功能界面
- [x] 创建用户登录界面
- [x] 优化响应式布局

## 后台管理系统开发
- [x] 创建管理员仪表板布局
- [x] 创建视频管理页面（列表、上传、编辑、删除）
- [x] 创建分类管理页面
- [x] 创建标签管理页面
- [x] 实现视频上传表单和S3存储集成
- [x] 实现视频编辑表单
- [x] 实现删除确认对话框

## 测试和优化
- [x] 编写后端单元测试
- [x] 测试视频上传和播放功能
- [x] 测试搜索和筛选功能
- [x] 测试管理员权限控制
- [x] 优化加载性能
- [x] 创建项目检查点


## Bug修复
- [x] 修复上传视频按黿点击错误
- [x] 修复Select.Item空值错误

## 字符编码修复
- [x] 修复 MySQL 数据库字符编码问题
- [x] 更新 init.sql 添加 UTF-8 配置
- [x] 更新 application.yml 添加 JDBC 字符编码参数
- [x] 更新 docker-compose.yml MySQL 配置
- [ ] 在本地 Docker 环境中重新初始化数据库（需要用户执行）
- [ ] 验证分类和标签显示正确

## 登录功能修复
- [x] 诊断登录失败原因
- [x] 生成正确的 BCrypt 密码哈希
- [x] 更新数据库中的管理员密码
- [x] 验证 admin/admin123 登录成功
- [x] 更新 init.sql 中的密码哈希
- [x] 修复前端登录响应处理（API 服务和 useAuth hook）
- [x] 验证前端登录成功

## 管理后台页面实现
- [x] 创建视频管理页面（列表、上传、编辑、删除）
- [x] 创建分类管理页面（列表、创建、编辑、删除）
- [x] 创建标签管理页面（列表、创建、编辑、删除）
- [x] 创建用户管理页面（列表、创建、编辑、删除）

## 平台统计和界面优化
- [x] 完善平台统计功能（获取真实统计数据）
- [x] 优化管理后台界面布局（剂大字体、调整间距）
- [x] 改进视觉层次和易用性

## 后端 API 实现
- [x] 实现分类 CRUD API（创建、读取、更新、删除）
- [x] 实现标签 CRUD API
- [x] 实现视频 CRUD API
- [x] 实现用户 CRUD API

## 需要修复的问题
- [x] 视频管理：添加文件上传功能
- [x] 视频管理：修复分类选择功能
- [x] 用户管理：修复添加用户功能（添加密码字段）
- [x] 用户管理：添加密码修改功能

## Bug 修复
- [x] 修复用户更新时 email 和 username 变成 null 的问题
- [x] 修复视频创建时 user_id 为 null 的问题
- [x] 修改密码后需要重新登录
- [x] 前台不显示"管理后台"按颁
- [x] 修复修改密码时 role 变成 USER 的问题
- [x] 修复视频列表仅返回已发布视频的问题

## 文件上传功能实现
- [x] 后端实现文件上传接口（保存到本地或 S3）
- [x] 前端修改上传逻辑（调用后端接口）
- [x] 配置 Spring Boot 静态文件服务
- [x] 配置 Docker 上传目录挂载
- [x] 修复文件上传大小限制（100MB）
- [x] 测试视频播放功能

## 视频加载性能优化
- [x] 前端视频播放优化（预加载、流式加载、自适应码率）
- [x] 后端视频流优化（分片、范围请求、CDN 支持）
- [x] 测试和验证性能提升

## 前端视频播放器问题
- [x] 修复视频播放器加载问题（需要点击 3 次才能正常播放）
- [x] 优化后端流媒体控制器
- [x] 修复前端视频播放逻辑
- [x] 测试视频播放功能

## 新问题需要修复
- [x] 修复前端首页分类搜索功能无效
- [x] 修复后端 /api/videos/{id}/tags 404 错误
- [x] 修复管理后台新增分类无法保存
- [x] 修复首页分类搜索无反应

## 视频编辑问题
- [x] 修复更新视频时 user_id 为 null 的问题

## 安全改进 - 双 Token 方案
- [x] 修改后端认证接口，返回 AccessToken + RefreshToken
- [x] 实现后端 Token 刷新接口
- [x] 修改前端 Token 存储（localStorage + HttpOnly Cookie）
- [x] 修改前端请求拦截器，支持自动刷新
- [ ] 测试双 Token 方案


## 双 Token 实现后的问题
- [x] 修复登录时 Network Error - CORS 配置不允许 Cookie
- [x] 修复首页视频不显示 - CORS 配置不允许 Cookie


## 403 Forbidden 错误
- [x] 修复 403 Forbidden 错误 - 添加端口 3003 到 CORS 配置


## 前端重新设计 - YouTube 风格
- [x] 设计 YouTube 风格的布局和配色
- [x] 创建顶部导航栏组件
- [x] 创建可折叠侧边栏组件
- [x] 重新设计首页视频网格布局
- [x] 重新设计视频详情页面
- [x] 优化深色主题和响应式设计
- [x] 测试前端重新设计


## YouTube 风格设计问题
- [x] 修复侧边栏折叠功能不工作


## 侧边栏按针改进
- [x] 改进侧边栏折叠按针设计，使用 hamburger menu 图标
- [x] 添加正确的 aria-label 无障礙属性


## Header 按针改进
- [x] 将 toggle menu 按针移到 header 中
- [x] 从侧边栏中移除折叠按针
- [x] 实现 header 和侧边栏之间的通信


## 视频列表响应式设计
- [x] 修改主内容区域布局，充分利用窗口宽度
- [x] 修改视频网格，根据窗口大小自適应显示 2/3/4 列
- [x] 优化视频卡片大小和间距
- [x] 测试不同窗口大小的响应式效果
